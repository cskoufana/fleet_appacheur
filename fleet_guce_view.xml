<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <record model="ir.ui.view" id="fleet_rim_form">
            <field name="name">fleet.rim.form</field>
            <field name="model">fleet.rim</field>
            <field name="arch" type="xml">
                <form string="Rim" version="7.0">
                    <sheet>
                        <group col="2">
                            <field name="name" required="1"/>
                            <field name="description"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_rim_tree">
            <field name="name">fleet.rim.tree</field>
            <field name="model">fleet.rim</field>
            <field name="arch" type="xml">
                <tree string="Rim" editable="top" version="7.0">
                    <field name="name"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="fleet_rim_act">
            <field name="name">Rim</field>
            <field name="res_model">fleet.rim</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem action="fleet_rim_act" parent="fleet.fleet_configuration" id="fleet_rim_menu" sequence="10"/>

        <record model="ir.ui.view" id="fleet_move_type_tree">
            <field name="name">fleet.move.type.tree</field>
            <field name="model">fleet.move.type</field>
            <field name="arch" type="xml">
                <tree string="Move types" editable="top" version="7.0">
                    <field name="name"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_move_type_form">
            <field name="name">fleet.move.type.form</field>
            <field name="model">fleet.move.type</field>
            <field name="arch" type="xml">
                <form string="Move Type" version="7.0">
                    <sheet>
                        <group col="2">
                            <field name="name"/>
                            <field name="description"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_move_type_act">
            <field name="name">Move Types</field>
            <field name="res_model">fleet.move.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem action="fleet_move_type_act" parent="fleet.fleet_configuration" id="fleet_move_type_menu"
                  sequence="20"/>

        <record model="ir.ui.view" id="fleet_consumption_card_type_tree">
            <field name="name">fleet.consumption.card.type.tree</field>
            <field name="model">fleet.consumption.card.type</field>
            <field name="arch" type="xml">
                <tree string="Consumption cards types" editable="bottom">
                    <field name="name"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_consumption_card_type_form">
            <field name="name">fleet.consumption.card.type.form</field>
            <field name="model">fleet.consumption.card.type</field>
            <field name="arch" type="xml">
                <form string="Consumption card type" version="7.0">
                    <sheet>
                        <group col="2">
                            <field name="name"/>
                            <field name="description"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_consumption_card_type_act">
            <field name="name">Consumption Cards Types</field>
            <field name="res_model">fleet.consumption.card.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem action="fleet_consumption_card_type_act" parent="fleet.fleet_configuration"
                  id="fleet_consumption_card_type_menu" sequence="20"/>

        <!--Passengers-->
        <record model="ir.ui.view" id="fleet_passenger_tree">
            <field name="name">fleet.passenger.tree</field>
            <field name="model">fleet.passenger</field>
            <field name="arch" type="xml">
                <tree string="Passengers" editable="top" version="7.0">
                    <field name="name"/>
                    <field name="identity_card_number"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_passenger_form">
            <field name="name">fleet.passenger.form</field>
            <field name="model">fleet.passenger</field>
            <field name="arch" type="xml">
                <form string="Passenger" version="7.0">
                    <sheet>
                        <group col="4">
                            <field name="name"/>
                            <field name="identity_card_number"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_passenger_act">
            <field name="name">Passengers</field>
            <field name="res_model">fleet.passenger</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem action="fleet_passenger_act" parent="fleet.fleet_configuration" id="fleet_passenger_menu"
                  sequence="20"/>

        <!--Consumption Cards-->
        <record model="ir.ui.view" id="fleet_consumption_card_tree">
            <field name="name">fleet.consumption.card.tree</field>
            <field name="model">fleet.consumption.card</field>
            <field name="arch" type="xml">
                <tree string="Consumption Cards">
                    <field name="card_type_id"/>
                    <field name="name"/>
                    <field name="security_code"/>
                    <field name="value"/>
                    <field name="balance"/>
                    <field name="active"/>
                    <field name="vendor_id"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_consumption_card_form">
            <field name="name">fleet.consumption.card.form</field>
            <field name="model">fleet.consumption.card</field>
            <field name="arch" type="xml">
                <form string="Consumption Card" version="7.0">
                    <header>
                        <!--<button name="view_recharges" string="View Recharges" class="oe_highlight" type="object" />-->
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <label for="name"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                            <label for="security_code"/>
                            <h2>
                                <field name="security_code"/>
                            </h2>
                        </div>
                        <div class="oe_right oe_button_box">
                            <button name="return_action_to_open" type="object"
                                    context="{'xml_id':'fleet_consumption_card_log_recharges_act'}"
                                    string="View Recharges" help="show the recharges for this consumption card"/>
                            <button name="view_consumptions" string="View Consumptions" class="oe_highlight"
                                    type="object"/>
                        </div>
                        <group col="2">
                            <field name="active"/>
                        </group>
                        <group col="4">
                            <field name="card_type_id" required="1"/>
                            <field name="vendor_id"/>
                            <field name="value"/>
                            <field name="balance"/>
                            <field name="critical_balance"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_consumption_card_act">
            <field name="name">Consumption Cards</field>
            <field name="res_model">fleet.consumption.card</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem id="fleet_consumption_cards" parent="fleet.menu_root" sequence="2" name="Consumption Cards"
                  groups="fleet.group_fleet_manager"/>
        <menuitem action="fleet_consumption_card_act" id="fleet_consumption_card_menu"
                  parent="fleet_consumption_cards"/>

        <!--Recharges-->
        <record model="ir.ui.view" id="fleet_consumption_card_log_recharges_tree">
            <field name="name">fleet.consumption.card.log.recharges.tree</field>
            <field name="model">fleet.consumption.card.log.recharges</field>
            <field name="arch" type="xml">
                <tree string="Recharges">
                    <field name="order_ref" required="1"/>
                    <field name="recharge_date"/>
                    <field name="consumption_card_id"/>
                    <field name="loader_id"/>
                    <field name="description"/>
                    <field name="old_value"/>
                    <field name="value" sum="Price"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_consumption_card_log_recharges_search">
            <field name="name">fleet.consumption.card.log.recharges.search</field>
            <field name="model">fleet.consumption.card.log.recharges</field>
            <field name="arch" type="xml">
                <search string="Recharges">
                    <field name="order_ref"/>
                    <field name="recharge_date"/>
                    <field name="consumption_card_id"/>
                    <group expand="1" string="Group By...">
                        <filter name="groupby_recharge_date" context="{'group_by' : 'recharge_date'}" string="Date"/>
                        <filter name="groupby_consumption_card" context="{'group_by' : 'consumption_card_id'}"
                                string="Consumption card"/>
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_consumption_card_log_recharges_form">
            <field name="name">fleet.consumption.card.log.recharges.form</field>
            <field name="model">fleet.consumption.card.log.recharges</field>
            <field name="arch" type="xml">
                <form string="Recharge" version="7.0">
                    <sheet>
                        <div class="oe_title">
                            <label for="order_ref" class="oe_edit_only"/>
                            <h1>
                                <field name="order_ref" nolabel="1"/>
                            </h1>
                            <label for="consumption_card_id" class="oe_edit_only"/>
                            <h2>
                                <field name="consumption_card_id" required="1" nolabel="1"
                                       on_change="on_change_consumption_card(consumption_card_id)"/>
                            </h2>
                        </div>
                        <group col="2">
                            <group col="2" string="Recharge Details">
                                <field name="recharge_date"/>
                                <field name="old_value" readonly="1"/>
                                <field name="value"/>
                                <field name="loader_id" readonly="1"/>
                            </group>
                            <group string="Description">
                                <field name="description" nolabel="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Attachments">
                                <field name="attachment_ids" nolabel="1" colspan="4">
                                    <tree string="Attachment">
                                        <field name="name"/>
                                        <field name="datas_fname"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_consumption_card_log_recharges_act">
            <field name="name">Recharges Logs</field>
            <field name="res_model">fleet.consumption.card.log.recharges</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_groupby_consumption_card" : True}</field>
        </record>
        <menuitem action="fleet_consumption_card_log_recharges_act" id="fleet_consumption_card_log_recharges_menu"
                  parent="fleet_consumption_cards"/>

        <!--Vehicle-->
        <record model="ir.ui.view" id="fleet_vehicle_form1">
            <field name="name">fleet.vehicle.form1</field>
            <field name="model">fleet.vehicle</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='act_show_log_cost']" position="after">
                    <button name="return_action_to_open_view" type="object"
                            context="{'xml_id':'fleet_vehicle_log_incidents_act'}" string="Incidents"
                            help="show the incidents logs for this vehicle"/>
                    <button name="return_action_to_open_view" type="object"
                            context="{'xml_id':'fleet_vehicle_log_moves_act'}" string="Moves"
                            help="show the moves logs for this vehicle"/>
                </xpath>
                <field name="color" position="after">
                    <field name="tank_capacity"/>
                    <field name="consumption"/>
                    <field name="tire_size"/>
                    <field name="rim_id"/>
                </field>
                <field name="car_value" position="after">
                    <field name="sale_date"/>
                    <field name="sale_amount"/>
                </field>
                <xpath expr="/form/sheet/group[2]" position="after">
                    <group col="2" string="Consumption card Option">
                        <field name="consumption_card_id" required="1"/>
                    </group>
                    <notebook>
                        <page string="Attachments">
                            <field name="attachment_ids" nolabel="1" colspan="4">
                                <tree string="Attachment">
                                    <field name="name"/>
                                    <field name="datas_fname"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </xpath>
            </field>
        </record>

        <!--Vehicle fuel log-->
        <record model="ir.ui.view" id="fleet_vehicle_log_fuel_form1">
            <field name="name">fleet.vehicle.log.fuel.form1</field>
            <field name="model">fleet.vehicle.log.fuel</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_log_fuel_form"/>
            <field name="arch" type="xml">
                <field name="liter" position="before">
                    <field name="payment_mode"/>
                    <field name="consumption_card_id" required="1"
                           attrs="{'invisible': [('payment_mode','!=','card')]}"/>
                </field>
                <!--<field name="liter" position="replace">-->
                <!--<field name="liter"  readonly="1"/>-->
                <!--</field>-->
                <!--<field name="price_per_liter" position="replace">-->
                <!--<field name="price_per_liter" required="1" on_change="on_change_value(liter,price_per_liter,amount)" />-->
                <!--</field>-->
                <!--<field name="amount" position="replace">-->
                <!--<field name="amount" required="1" on_change="on_change_value(liter,price_per_liter,amount)" />-->
                <!--</field>-->
                <field name="vendor_id" position="replace">
                    <field name="vendor_id" attrs="{'readonly': [('payment_mode','=','card')]}"/>
                </field>
                <xpath expr="/form/sheet/group[3]" position="after">
                    <notebook>
                        <page string="Attachments">
                            <field name="attachment_ids" nolabel="1" colspan="4">
                                <tree string="Attachment">
                                    <field name="name"/>
                                    <field name="datas_fname"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="fleet_vehicle_log_fuel_tree1">
            <field name="name">fleet.vehicle.log.fuel.tree1</field>
            <field name="model">fleet.vehicle.log.fuel</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_log_fuel_tree"/>
            <field name="arch" type="xml">
                <field name="liter" position="before">
                    <field name="payment_mode"/>
                </field>
            </field>
        </record>

        <!--Incidents-->
        <record model="ir.ui.view" id="fleet_vehicle_log_incidents_tree">
            <field name="name">fleet.vehicle.log.incidents.tree</field>
            <field name="model">fleet.vehicle.log.incidents</field>
            <field name="arch" type="xml">
                <tree string="Incidents">
                    <field name="date"/>
                    <field name="vehicle_id"/>
                    <field name="user_id"/>
                    <field name="note"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_log_incidents_search">
            <field name="name">fleet.vehicle.log.incidents.tree</field>
            <field name="model">fleet.vehicle.log.incidents</field>
            <field name="arch" type="xml">
                <search string="Vehicles Incidents">
                    <field name="vehicle_id"/>
                    <field name="date"/>
                    <group expand="1" string="Group By...">
                        <filter name="groupby_vehicle" context="{'group_by' : 'vehicle_id'}" string="Vehicle"/>
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_log_incidents_form">
            <field name="name">fleet.vehicle.log.incidents.form</field>
            <field name="model">fleet.vehicle.log.incidents</field>
            <field name="arch" type="xml">
                <form string="Incident" version="7.0">
                    <header>
                        <button name="btn_action_confirm_incidents" string="Confirm" states="draft"
                                class="oe_highlight"/>
                        <button name="btn_action_done_incidents" string="Done" states="confirmed" class="oe_highlight"/>
                        <button name="action_draft" string="Draft" type="object" invisible="1"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group col="2">
                            <group col="2" string="Details">
                                <field name="date" readonly="1"/>
                                <field name="vehicle_id" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="user_id" readonly="1"/>

                            </group>
                            <group string="Odometer Detail">
                                <field name="odometer" attrs="{'readonly': [('state','!=','draft')]}"/>
                            </group>
                        </group>
                        <separator colspan="4" string="Note"/>
                        <field name="note" colspan="4" nolabel="1"/>
                        <notebook>
                            <page string="Attachments">
                                <field name="attachment_ids" nolabel="1" colspan="4">
                                    <tree string="Attachment">
                                        <field name="name"/>
                                        <field name="datas_fname"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_vehicle_log_incidents_act">
            <field name="name">Incidents</field>
            <field name="res_model">fleet.vehicle.log.incidents</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_groupby_vehicle" : True}</field>
        </record>
        <menuitem action="fleet_vehicle_log_incidents_act" id="fleet_vehicle_log_incidents_menu"
                  parent="fleet.fleet_vehicles" sequence="10" groups="fleet.group_fleet_user"/>

        <!--Move-->
        <record model="ir.ui.view" id="fleet_vehicle_log_moves_tree">
            <field name="name">fleet.vehicle.log.moves.tree</field>
            <field name="model">fleet.vehicle.log.moves</field>
            <field name="arch" type="xml">
                <tree string="Moves" colors="red:state=='confirmed'; green:state=='done'">
                    <field name="date"/>
                    <field name="vehicle_id"/>
                    <field name="move_type_id"/>
                    <field name="driver_id"/>
                    <field name="estimated_departure_date"/>
                    <field name="departure_date"/>
                    <field name="arrival_place"/>
                    <field name="back_date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_log_moves_search">
            <field name="name">fleet.vehicle.log.moves.search</field>
            <field name="model">fleet.vehicle.log.moves</field>
            <field name="arch" type="xml">
                <search string="Moves">
                    <field name="date"/>
                    <field name="vehicle_id"/>
                    <field name="driver_id"/>
                    <field name="arrival_place"/>
                    <group expand="1" string="Group By...">
                        <filter string="Vehicle" name="groupby_vehicle" context="{'group_by' : 'vehicle_id'}"/>
                        <filter string="Driver" name="groupby_driver" context="{'group_by' : 'driver_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_log_moves_form">
            <field name="name">fleet.vehicle.log.moves.form</field>
            <field name="model">fleet.vehicle.log.moves</field>
            <field name="arch" type="xml">
                <form string="Move" version="7.0">
                    <header>
                        <!--<button name="btn_action_confirm_moves" string="Confirm" states="draft" class="oe_highlight" />-->
                        <button name="btn_action_done_moves" string="Register the return" states="confirmed"
                                class="oe_highlight" groups="fleet.group_fleet_user"/>
                        <button name="action_draft" string="Draft" type="object" invisible="1"/>
                        <field name="state" readonly="1" widget="statusbar"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title">-->
                        <!--<label for="move_type_id"/>-->
                        <!--<h1>-->
                        <!--<field name="move_type_id" attrs="{'readonly':[('state','!=','draft')]}"/>-->
                        <!--</h1>-->
                        <!--</div>-->
                        <group col="4" string="General information">
                            <field name="vehicle_id" on_change="on_change_vehicle(vehicle_id)"
                                   attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="driver_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="move_type_id" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="move_order_ref" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="object" attrs="{'readonly':[('state','!=','draft')]}"/>
                        </group>
                        <group col="2">
                            <group col="2" string="Departure">
                                <field name="estimated_departure_date" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="departure_date" readonly="1"
                                       attrs="{'invisible':[('state','=','draft')]}"/>
                                <label for="odometer" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                                <div attrs="{'invisible': [('state', '=', 'draft')]}">
                                    <field name="odometer" nolabel="0" class="oe_inline"
                                           attrs="{'readonly':[('state','!=','confirmed')]}"/>
                                    <field name="odometer_unit" class="oe_inline"/>
                                </div>

                                <field name="departure_place" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="arrival_place" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <!--<field name="cost_amount" nolabel="0"/>-->
                            </group>
                            <group col="2" string="Return" attrs="{'invisible':[('state','=','draft')]}">
                                <field name="back_date"
                                       attrs="{'readonly':[('state','!=','confirmed')], 'required' : [('state','=','confirmed')]}"/>
                                <label for="odometer"/>
                                <div>
                                    <field name="odometer_back" nolabel="0" class="oe_inline"
                                           attrs="{'readonly':[('state','!=','confirmed')], 'required' : [('state','=','confirmed')]}"/>
                                    <field name="odometer_back_unit" class="oe_inline"/>
                                </div>
                                <!--<field name="odometer_id" nolabel="1">-->
                                <!--<form version="7.0">-->
                                <!--<field name="date" />-->
                                <!--<field name="value" />-->
                                <!--</form>-->
                                <!--</field>-->
                                <!--<field name="odometer" nolabel="0" />-->
                            </group>
                        </group>
                        <separator string="Note" colspan="4"/>
                        <field name="notes" nolabel="1" colspan="4"/>
                        <notebook>
                            <page string="Passengers">
                                <field name="passenger_ids" widget="one2many_list"
                                       attrs="{'readonly' : [('state', '!=', 'draft')]}"/>
                            </page>
                            <page string="Other Passengers">
                                <field name="other_passenger_ids" nolabel="1"
                                       attrs="{'readonly' : [('state', '!=', 'draft')]}" widget="one2many_list">
                                    <tree version="7.0" editable="bottom">
                                        <field name="name" required="1"/>
                                        <field name="identity_card_number"/>
                                    </tree>
                                </field>
                            </page>
                            <!--<page string="Attachments">-->
                            <!--<field name="attachment_ids" nolabel="1" colspan="4">-->
                            <!--<tree string="Attachment">-->
                            <!--<field name="name"/>-->
                            <!--<field name="datas_fname" />-->
                            <!--</tree>-->
                            <!--</field>-->
                            <!--</page>-->
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="fleet_vehicle_log_moves_calendar" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.moves.calendar</field>
            <field name="model">fleet.vehicle.log.moves</field>
            <field name="sequence" eval="0"/>
            <field name="act_window_id" ref="fleet_vehicle_log_moves_act"/>
            <field name="arch" type="xml">
                <calendar string="Moves" color="driver_id" date_start="departure_date" date_stop="back_date">
                    <field name="name"/>
                </calendar>
            </field>
        </record>
        <record id="fleet_vehicle_log_moves_calendar1" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.moves.calendar1</field>
            <field name="model">fleet.vehicle.log.moves</field>
            <field name="sequence" eval="1"/>
            <field name="act_window_id" ref="fleet_vehicle_log_plan_moves_act"/>
            <field name="arch" type="xml">
                <calendar string="Moves" color="driver_id" date_start="estimated_departure_date" date_stop="back_date">
                    <field name="name"/>
                </calendar>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_vehicle_log_moves_act">
            <field name="name">Confirmed Moves</field>
            <field name="res_model">fleet.vehicle.log.moves</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="context">{}</field>
            <field name="domain">[('state','!=','draft')]</field>
        </record>
        <record model="ir.actions.act_window" id="fleet_vehicle_log_plan_moves_act">
            <field name="name">Planned Moves</field>
            <field name="res_model">fleet.vehicle.log.moves</field>
            <field name="view_type">form</field>
            <field name="view_mode">calendar,tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[('state','=','draft')]</field>
        </record>
        <menuitem id="fleet_vehicle_log_moves" parent="fleet.menu_root" sequence="2" name="Moves"/>
        <menuitem action="fleet_vehicle_log_plan_moves_act" id="fleet_vehicle_log_plan_moves_menu"
                  parent="fleet_vehicle_log_moves" groups="fleet.group_fleet_user" sequence="10"/>
        <menuitem action="fleet_vehicle_log_moves_act" id="fleet_vehicle_log_moves_menu"
                  parent="fleet_vehicle_log_moves" groups="fleet.group_fleet_user" sequence="11"/>

        <!--Assignment-->
        <record model="ir.ui.view" id="fleet_vehicle_assignment_tree">
            <field name="name">fleet.vehicle.assignment.tree</field>
            <field name="model">fleet.vehicle.assignment</field>
            <field name="arch" type="xml">
                <tree string="Assignments">
                    <field name="assignment_date"/>
                    <field name="vehicle_id"/>
                    <field name="driver_id"/>
                    <field name="old_driver_id"/>
                    <field name="note"/>
                    <!--<field name="create_uid" />-->
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_assignment_search">
            <field name="name">fleet.vehicle.assignment.search</field>
            <field name="model">fleet.vehicle.assignment</field>
            <field name="arch" type="xml">
                <search string="Assignments">
                    <field name="assignment_date"/>
                    <field name="driver_id"/>
                    <field name="vehicle_id"/>
                    <group expand="1" string="Group By...">
                        <filter string="Vehicle" name="groupby_vehicle" context="{'group_by' : 'vehicle_id'}"/>
                        <filter string="Driver" name="groupby_driver" context="{'group_by' : 'driver_id'}"/>
                        <filter string="Date" name="groupby_date" context="{'group_by' : 'assignment_date'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_assignment_form">
            <field name="name">fleet.vehicle.assignment.form</field>
            <field name="model">fleet.vehicle.assignment</field>
            <field name="arch" type="xml">
                <form string="Assignment" version="7.0">
                    <sheet>
                        <group col="4">
                            <field name="assignment_date"/>
                            <field name="vehicle_id" on_change="on_change_vehicle(vehicle_id)"/>
                            <field name="old_driver_id"/>
                            <field name="driver_id"/>
                        </group>
                        <separator string="Notes" colspan="4"/>
                        <field name="note"/>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_vehicle_assignment_act">
            <field name="name">Assignments</field>
            <field name="res_model">fleet.vehicle.assignment</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_groupby_vehicle" : True}</field>
        </record>
        <menuitem id="fleet_vehicle_assignments" parent="fleet.menu_root" sequence="2" name="Assignments"/>
        <menuitem action="fleet_vehicle_assignment_act" id="fleet_vehicle_assignment_menu"
                  parent="fleet_vehicle_assignments"/>

        <!--Services-->
        <record model="ir.ui.view" id="fleet_vehicle_log_services_form1">
            <field name="name">fleet.vehicle.log.services.form1</field>
            <field name="model">fleet.vehicle.log.services</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_log_services_form"/>
            <field name="arch" type="xml">
                <field name="vehicle_id" position="after">
                    <field name="incident_id" required="0"/>
                </field>
                <xpath expr="/form/sheet/group[4]" position="after">
                    <notebook>
                        <page string="Attachments">
                            <field name="attachment_ids" nolabel="1" colspan="4">
                                <tree string="Attachment">
                                    <field name="name"/>
                                    <field name="datas_fname"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </xpath>
            </field>
        </record>

        <!--Needs-->
        <record model="ir.ui.view" id="fleet_vehicle_log_moves_needs_tree">
            <field name="name">fleet.vehicle.log.moves.needs.tree</field>
            <field name="model">fleet.vehicle.log.moves.needs</field>
            <field name="arch" type="xml">
                <tree string="Needs"
                      colors="red:answer_decision=='no'; green:answer_decision=='yes'">
                    <field name="need_date"/>
                    <field name="user_id"/>
                    <field name="destination"/>
                    <field name="departure_date"/>
                    <field name="return_date"/>
                    <field name="seats"/>
                    <field name="note"/>
                    <field name="state"/>
                    <field name="answer_decision" invisible="1"/>
                </tree>
            </field>
        </record>
        <record id="fleet_vehicle_log_moves_needs_search" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.moves.needs.search</field>
            <field name="model">fleet.vehicle.log.moves.needs</field>
            <field name="arch" type="xml">
                <search string="Needs">
                    <field name="need_date"/>
                    <field name="user_id"/>
                    <group expand="1" string="Group By...">
                        <filter string="Date" name="groupby_need_date" context="{'group_by' : 'need_date'}"/>
                        <filter string="User" name="groupby_user_id" context="{'group_by' : 'user_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record id="fleet_vehicle_log_moves_needs_calendar" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.moves.needs.calendar</field>
            <field name="model">fleet.vehicle.log.moves.needs</field>
            <field name="arch" type="xml">
                <calendar string="Needs" color="user_id" date_start="departure_date" date_stop="return_date">
                    <field name="name"/>
                </calendar>
            </field>
        </record>
        <record model="ir.ui.view" id="fleet_vehicle_log_moves_needs_form">
            <field name="name">fleet.vehicle.log.moves.needs.form</field>
            <field name="model">fleet.vehicle.log.moves.needs</field>
            <field name="arch" type="xml">
                <form string="Need" version="7.0">
                    <header>
                        <button name="action_submitted" string="Submit" states="draft" class="oe_highlight"
                                type="object"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group col="4">
                            <field name="need_date"/>
                            <field name="user_id"/>
                            <field name="departure_date" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="return_date" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="destination" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="seats" attrs="{'readonly': [('state','!=','draft')]}"/>
                        </group>
                        <separator string="Notes" colspan="4"/>
                        <field name="note" colspan="4" nolabel="1" attrs="{'readonly': [('state','!=','draft')]}"/>
                        <notebook>
                            <page string="Answer" attrs="{'invisible': [('state','!=','answered')]}">
                                <group col="2">
                                    <group col="2" string="Detail">
                                        <field name="answer_date" readonly="1"/>
                                        <field name="answer_decision" readonly="1"/>
                                        <field name="move_id" readonly="1"
                                               attrs="{'invisible': [('answer_decision', '!=', 'yes')]}"/>
                                        <field name="answerer" readonly="1"/>
                                    </group>
                                    <group col="2" string="Notes">
                                        <field name="answer_notes" nolabel="1" readonly="1"/>
                                    </group>
                                </group>
                                <group col="3" attrs="{'invisible': [('answer_decision', '!=', 'yes')]}">
                                    <field name="move_id" readonly="1" options="{'no_open':true}"/>
                                    <button name="view_move_form" type="object" string="View Move"
                                            help="Show the planned move"/>
                                </group>
                            </page>
                            <!--<page string="Attachments">-->
                            <!--<field name="attachment_ids" nolabel="1" colspan="4">-->
                            <!--<tree string="Attachment">-->
                            <!--<field name="name"/>-->
                            <!--<field name="datas_fname" />-->
                            <!--</tree>-->
                            <!--</field>-->
                            <!--</page>-->
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="fleet_vehicle_log_moves_needs_act">
            <field name="name">Needs</field>
            <field name="res_model">fleet.vehicle.log.moves.needs</field>
            <field name="view_type">form</field>
            <field name="view_mode">calendar,tree,form</field>
        </record>

        <menuitem action="fleet_vehicle_log_moves_needs_act" id="fleet_vehicle_log_moves_needs_menu"
                  parent="fleet_vehicle_log_moves" sequence="9"/>

    </data>
</openerp>